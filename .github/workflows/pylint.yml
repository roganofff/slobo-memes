name: Check project
on: [push]
jobs:
  test_bot:
    name: Bot test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Download Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.12.6
      - name: Install Poetry
        uses: abatilo/actions-poetry@v2
        with:
          poetry-version: 1.8.5
      - name: Download dependencies and run tests
        run: |
          python -m pip install --upgrade pip
          cd ./bot
          poetry lock 
          poetry install --no-root
          poetry run pytest .
  test_database:
    name: Database test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Download Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.12.6
      - name: Install Poetry
        uses: abatilo/actions-poetry@v2
        with:
          poetry-version: 1.8.5
      - name: Download dependencies and run tests
        run: |
            python -m pip install --upgrade pip
            cd ./database
            poetry lock 
            poetry install --no-root
            poetry run pytest .
  # linter:
  #   name: Linter
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - name: Download Python
  #       uses: actions/setup-python@v2
  #       with:
  #         python-version: 3.12.6
  #     - name: Download Dependencies
  #       run: |
  #         python -m pip install --upgrade pip
  #         pip install flake8==6.1.0 wemake-python-styleguide==0.18.0 flake8-bandit=4.1.1
  #     - name: Flake8
  #       run: flake8 .